<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geometric Rush - Jogo de Plataforma</title>
    <style>
        /* ===== CONFIGURAÇÕES GERAIS ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            color: #fff;
        }

        /* ===== CONTAINER DO JOGO ===== */
        .game-container {
            position: relative;
            background: #16213e;
            border: 3px solid #0f3460;
            border-radius: 12px;
            box-shadow: 
                0 0 40px rgba(15, 52, 96, 0.5),
                inset 0 0 20px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        /* ===== TELA DO CANVAS (onde o jogo acontece) ===== */
        #gameCanvas {
            display: block;
            background: linear-gradient(180deg, #0f3460 0%, #16213e 100%);
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }

        /* ===== INFORMAÇÕES DO JOGO ===== */
        .game-info {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 18px;
            color: #00d9ff;
            text-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
            z-index: 10;
            font-weight: bold;
            letter-spacing: 2px;
        }

        .level-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 18px;
            color: #ff6b6b;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
            z-index: 10;
            font-weight: bold;
            letter-spacing: 2px;
        }

        /* ===== TELA DE GAME OVER ===== */
        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background: rgba(22, 33, 62, 0.95);
            padding: 40px 60px;
            border-radius: 15px;
            border: 3px solid #00d9ff;
            box-shadow: 0 0 50px rgba(0, 217, 255, 0.4);
            display: none;
            z-index: 100;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translate(-50%, -60%);
                opacity: 0;
            }
            to {
                transform: translate(-50%, -50%);
                opacity: 1;
            }
        }

        .game-over h2 {
            font-size: 48px;
            color: #ff6b6b;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 107, 107, 0.6);
        }

        .game-over p {
            font-size: 24px;
            color: #00d9ff;
            margin-bottom: 30px;
        }

        .game-over button {
            background: linear-gradient(135deg, #00d9ff 0%, #0066ff 100%);
            color: #fff;
            border: none;
            padding: 15px 40px;
            font-size: 20px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-family: 'Courier New', monospace;
        }

        .game-over button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(0, 217, 255, 0.6);
        }

        /* ===== CONTROLES (INSTRUÇÕES) ===== */
        .controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: #888;
            font-size: 14px;
            z-index: 10;
        }

        .controls span {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 10px;
            margin: 0 5px;
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* ===== PARTÍCULAS DE FUNDO ===== */
        .particle {
            position: absolute;
            background: rgba(0, 217, 255, 0.2);
            border-radius: 50%;
            pointer-events: none;
            animation: float 4s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Informações do jogo -->
        <div class="game-info">
            PONTOS: <span id="score">0</span>
        </div>
        <div class="level-indicator">
            FASE: <span id="level">1</span>
        </div>

        <!-- Canvas onde o jogo é desenhado -->
        <canvas id="gameCanvas" width="800" height="600"></canvas>

        <!-- Tela de Game Over -->
        <div class="game-over" id="gameOver">
            <h2>GAME OVER</h2>
            <p>Pontuação Final: <span id="finalScore">0</span></p>
            <button onclick="restartGame()">JOGAR NOVAMENTE</button>
        </div>

        <!-- Controles -->
        <div class="controls">
            <span>← →</span> Mover
            <span>ESPAÇO</span> Pular
        </div>
    </div>

    <script>
        // ==========================================
        // CONFIGURAÇÃO INICIAL DO CANVAS
        // ==========================================
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // ==========================================
        // VARIÁVEIS GLOBAIS DO JOGO
        // ==========================================
        let score = 0;
        let level = 1;
        let gameRunning = true;
        let keys = {}; // Armazena quais teclas estão pressionadas

        // ==========================================
        // JOGADOR (seu personagem)
        // ==========================================
        const player = {
            x: 100,           // Posição horizontal
            y: 400,           // Posição vertical
            width: 30,        // Largura do jogador
            height: 30,       // Altura do jogador
            velocityX: 0,     // Velocidade horizontal
            velocityY: 0,     // Velocidade vertical
            speed: 5,         // Velocidade de movimento
            jumpPower: 12,    // Força do pulo
            gravity: 0.5,     // Gravidade (quanto maior, mais pesado)
            onGround: false,  // Está no chão?
            color: '#00d9ff'  // Cor do jogador (VOCÊ PODE MUDAR!)
        };

        // ==========================================
        // PLATAFORMAS (onde você pode andar)
        // ==========================================
        let platforms = [
            // Formato: { x, y, width, height, color }
            { x: 0, y: 550, width: 800, height: 50, color: '#0f3460' },      // Chão
            { x: 200, y: 450, width: 150, height: 20, color: '#ff6b6b' },    // Plataforma 1
            { x: 450, y: 350, width: 150, height: 20, color: '#ffd93d' },    // Plataforma 2
            { x: 100, y: 250, width: 120, height: 20, color: '#6bcf7f' },    // Plataforma 3
            { x: 550, y: 200, width: 180, height: 20, color: '#b19cd9' },    // Plataforma 4
        ];

        // ==========================================
        // OBSTÁCULOS (inimigos que você deve evitar)
        // ==========================================
        let obstacles = [
            { x: 400, y: 520, width: 40, height: 30, color: '#ff3838', velocityX: 2 },
            { x: 600, y: 320, width: 30, height: 30, color: '#ff3838', velocityX: -3 }
        ];

        // ==========================================
        // MOEDAS/PONTOS (colete para ganhar pontos!)
        // ==========================================
        let coins = [
            { x: 270, y: 400, width: 20, height: 20, collected: false },
            { x: 500, y: 300, width: 20, height: 20, collected: false },
            { x: 150, y: 200, width: 20, height: 20, collected: false },
            { x: 620, y: 150, width: 20, height: 20, collected: false }
        ];

        // ==========================================
        // DETECÇÃO DE TECLAS (controles)
        // ==========================================
        document.addEventListener('keydown', (e) => {
            keys[e.code] = true;
            
            // Pular quando apertar ESPAÇO (e estiver no chão)
            if (e.code === 'Space' && player.onGround) {
                player.velocityY = -player.jumpPower;
                player.onGround = false;
            }
        });

        document.addEventListener('keyup', (e) => {
            keys[e.code] = false;
        });

        // ==========================================
        // FUNÇÃO: ATUALIZAR JOGADOR
        // ==========================================
        function updatePlayer() {
            // Movimento horizontal (esquerda e direita)
            if (keys['ArrowLeft']) {
                player.velocityX = -player.speed;
            } else if (keys['ArrowRight']) {
                player.velocityX = player.speed;
            } else {
                player.velocityX = 0; // Para quando soltar a tecla
            }

            // Aplicar gravidade
            player.velocityY += player.gravity;

            // Atualizar posição
            player.x += player.velocityX;
            player.y += player.velocityY;

            // Limitar aos lados da tela
            if (player.x < 0) player.x = 0;
            if (player.x + player.width > canvas.width) {
                player.x = canvas.width - player.width;
            }

            // Resetar "onGround" antes de checar colisões
            player.onGround = false;

            // Checar colisão com plataformas
            platforms.forEach(platform => {
                if (checkCollision(player, platform)) {
                    // Se está caindo (velocidade positiva pra baixo)
                    if (player.velocityY > 0) {
                        player.y = platform.y - player.height;
                        player.velocityY = 0;
                        player.onGround = true;
                    }
                }
            });

            // Game Over se cair do mapa
            if (player.y > canvas.height) {
                endGame();
            }
        }

        // ==========================================
        // FUNÇÃO: ATUALIZAR OBSTÁCULOS
        // ==========================================
        function updateObstacles() {
            obstacles.forEach(obstacle => {
                // Mover obstáculo
                obstacle.x += obstacle.velocityX;

                // Inverter direção nas bordas
                if (obstacle.x <= 0 || obstacle.x + obstacle.width >= canvas.width) {
                    obstacle.velocityX *= -1;
                }

                // Checar colisão com jogador
                if (checkCollision(player, obstacle)) {
                    endGame();
                }
            });
        }

        // ==========================================
        // FUNÇÃO: ATUALIZAR MOEDAS
        // ==========================================
        function updateCoins() {
            coins.forEach(coin => {
                if (!coin.collected && checkCollision(player, coin)) {
                    coin.collected = true;
                    score += 100;
                    document.getElementById('score').textContent = score;

                    // Checar se completou a fase
                    if (coins.every(c => c.collected)) {
                        nextLevel();
                    }
                }
            });
        }

        // ==========================================
        // FUNÇÃO: CHECAR COLISÃO
        // ==========================================
        function checkCollision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }

        // ==========================================
        // FUNÇÃO: DESENHAR TUDO NA TELA
        // ==========================================
        function draw() {
            // Limpar tela
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Desenhar plataformas
            platforms.forEach(platform => {
                ctx.fillStyle = platform.color;
                ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
                
                // Borda brilhante
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.lineWidth = 2;
                ctx.strokeRect(platform.x, platform.y, platform.width, platform.height);
            });

            // Desenhar moedas
            coins.forEach(coin => {
                if (!coin.collected) {
                    // Efeito de rotação
                    const time = Date.now() / 1000;
                    const rotation = Math.sin(time * 5) * 0.3;
                    
                    ctx.save();
                    ctx.translate(coin.x + coin.width / 2, coin.y + coin.height / 2);
                    ctx.rotate(rotation);
                    
                    ctx.fillStyle = '#ffd93d';
                    ctx.fillRect(-coin.width / 2, -coin.height / 2, coin.width, coin.height);
                    
                    // Brilho
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
                    ctx.fillRect(-coin.width / 4, -coin.height / 4, coin.width / 2, coin.height / 2);
                    
                    ctx.restore();
                }
            });

            // Desenhar obstáculos
            obstacles.forEach(obstacle => {
                ctx.fillStyle = obstacle.color;
                ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
                
                // Efeito de perigo
                ctx.strokeStyle = '#fff';
                ctx.lineWidth = 2;
                ctx.strokeRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            });

            // Desenhar jogador com efeito de brilho
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.width, player.height);
            
            // Borda brilhante do jogador
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';
            ctx.lineWidth = 2;
            ctx.strokeRect(player.x, player.y, player.width, player.height);
            
            // Núcleo brilhante
            ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';
            ctx.fillRect(player.x + 10, player.y + 10, player.width - 20, player.height - 20);
        }

        // ==========================================
        // FUNÇÃO: PRÓXIMA FASE
        // ==========================================
        function nextLevel() {
            level++;
            document.getElementById('level').textContent = level;
            score += 500; // Bônus de fase
            document.getElementById('score').textContent = score;

            // Resetar moedas
            coins.forEach(coin => coin.collected = false);

            // Aumentar dificuldade
            obstacles.forEach(obstacle => {
                obstacle.velocityX *= 1.2; // Obstáculos mais rápidos
            });

            // Resetar posição do jogador
            player.x = 100;
            player.y = 400;
            player.velocityY = 0;
        }

        // ==========================================
        // FUNÇÃO: FIM DE JOGO
        // ==========================================
        function endGame() {
            gameRunning = false;
            document.getElementById('finalScore').textContent = score;
            document.getElementById('gameOver').style.display = 'block';
        }

        // ==========================================
        // FUNÇÃO: REINICIAR JOGO
        // ==========================================
        function restartGame() {
            // Resetar variáveis
            score = 0;
            level = 1;
            gameRunning = true;
            
            document.getElementById('score').textContent = score;
            document.getElementById('level').textContent = level;
            document.getElementById('gameOver').style.display = 'none';

            // Resetar jogador
            player.x = 100;
            player.y = 400;
            player.velocityX = 0;
            player.velocityY = 0;

            // Resetar moedas
            coins.forEach(coin => coin.collected = false);

            // Resetar obstáculos
            obstacles = [
                { x: 400, y: 520, width: 40, height: 30, color: '#ff3838', velocityX: 2 },
                { x: 600, y: 320, width: 30, height: 30, color: '#ff3838', velocityX: -3 }
            ];

            // Recomeçar loop do jogo
            gameLoop();
        }

        // ==========================================
        // LOOP PRINCIPAL DO JOGO
        // ==========================================
        function gameLoop() {
            if (!gameRunning) return;

            updatePlayer();
            updateObstacles();
            updateCoins();
            draw();

            requestAnimationFrame(gameLoop);
        }

        // ==========================================
        // INICIAR O JOGO!
        // ==========================================
        gameLoop();
    </script>
</body>
  </html>
